Class Autoloading
=================

Yii relies on the [class autoloading mechanism](http://www.php.net/manual/en/language.oop5.autoload.php)
to locate and include all required class files. The loader itself is generated by Composer and complies to
[PSR-4 standard](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-4-autoloader.md).

> Note: For simplicity of description, in this section we will only talk about autoloading of classes. However, keep in
  mind that the content we are describing here applies to autoloading of interfaces and traits as well.
  
  
## Configuring autoloader <span id="configuring-autoloader"></span>

Since Yii uses Composer-generated autoloader, in order to configure it, `composer.json` should be used:


```json
{
    "name": "myorg/myapp",
    "autoload": {
        "psr-4": {
          "app\\": "src"
        }
    },
    "autoload-dev": {
        "psr-4": {
            "tests\\": "tests"
        }
    }
}
```

Note that test-specific requirements are in `autoload-dev` in order not to pollute autoloader in production where Composer
is used with `--no-dev` flag.

See [Composer documentation](https://getcomposer.org/doc/01-basic-usage.md#autoloading) for details.

After configuration is done, run `composer dump-autoload` to generate autoloader. Note that it should be done after each
re-configuration.

In order for your application to be aware of autoloader, require `vendor/autoload.php` in your entry script. For web
application it is typically `index.php`, for console it's `yii`:

```php
<?php

// comment out the following two lines when deployed to production
defined('YII_DEBUG') or define('YII_DEBUG', true);
defined('YII_ENV') or define('YII_ENV', 'dev');

require(__DIR__ . '/../vendor/autoload.php');

$config = require(__DIR__ . '/../config/web.php');

(new yii\web\Application($config))->run();

```

## Using autoloader <span id="using-autoloader"></span>

To make use of the class autoloader, you should follow two simple rules when creating and naming your classes:

* Each class must be under a [namespace](http://php.net/manual/en/language.namespaces.php) (e.g. `foo\bar\MyClass`)
* Each class must be saved in an individual file whose path matches namespace and name matches class name with `.php` at
  the end of it.
  
> Note: In fact, you can break 2nd rule if you need to store a class in a directory that doesn't match the namespace.
> See [Composer documentation](https://getcomposer.org/doc/01-basic-usage.md#autoloading). 

For example, if a class name and namespace is `foo\bar\MyClass` the file would be `bar/MyClass.php` and `foo` will be
mapped according to `composer.json` autoloader definition.

When using the [Project Template](start-installation.md), you may put your classes under the top-level
namespace `app` that is pre-defined for you. A class name like `app\components\MyClass`
can be resolved into the class file `AppBasePath/components/MyClass.php`.
